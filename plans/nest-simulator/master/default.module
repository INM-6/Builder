#%Module1.0#####################################################################
#
# ${AUTOMATIC_BUILD_WARNING}
#

set     INSTALLDIR      ${TARGET}

proc ModulesHelp { } {
        global INSTALLDIR
        puts stderr "================================================================================
NEST Simulator ${VERSION} (${VARIANT})
================================================================================

   NEST is a simulator for spiking neural network models that focuses on the
   dynamics, size and structure of neural systems rather than on the exact
   morphology of individual neurons.

   Load this modulefile instead of the usual 'source .../bin/nest_vars.sh' to
   initialize all environment variables.

   For help visit:  https://nest-simulator.org/documentation.
"
        set fp [open "\$INSTALLDIR/ConfigurationSummary.txt" r]
        puts stderr [read \$fp];
        close \$fp;
        puts stderr "Module settings:
INSTALLDIR:     \$INSTALLDIR"
}

module-whatis   "NEST spiking neural network simulator, version ${VERSION} (${VARIANT} build)"

conflict ${PACKAGE}

################################################################################
# from \$INSTALLDIR/bin/nest_vars.sh
#
module load CMake/3.18.0
module load Python/3.8.5
module load SciPy-Stack/2020-Python-3.8.5
module load GCC
module load ParaStationMPI/5.4.7-1
module load GSL
module load jemalloc
module load Boost/1.74.0
prepend-path    PYTHONPATH              \$INSTALLDIR/lib64/python3.8/site-packages
prepend-path    PATH                    \$INSTALLDIR/bin
